#!/bin/bash

# dataset filenames
filename=(
ibm32
Hamrle1
GD01_c
karate
football
GD95_a
cage5
GD98_a
bcspwr01
chesapeake
mycielskian6
GD97_b
bcsstk01
mesh1em6
bcsstm01
mesh1em1
mesh1e1
bcspwr02
d_ss
curtis54
will57
impcol_b
dwt_59
can_61
GD95_c
dolphins
can_62
bfwb62
bfwa62
GD99_b
GD96_c
bcsstm02
sphere2
ww_36_pmec_36
bcsstk02
dwt_66
west0067
CAG_mat72
GlossGT
dwt_72
can_73
GD95_b
lesmis
steam3
GD02_b
GD97_a
ash85
cat_ears_2_1
Sandi_authors
d_dyn
d_dyn1
dwt_87
tols90
cage6
mycielskian7
can_96
spaceStation_1
nos4
olm100
rotor1
tub100
GD06_theory
pivtol
ck104
GD99_c
n3c6-b1
polbooks
breasttissue_10NN
GD96_b
GD98_c
bcsstk03
adjnoun
bcsstm03
gent113
gre_115
football
bcspwr03
robot
GD98_b
Journals
arc130
lns_131
lnsp_131
bcsstm04
bcsstk04
west0132
rajat11
rw136
impcol_c
bcsstm22
bcsstk22
can_144
lund_b
lund_a
cz148
Trefethen_150
iris_dataset_30NN
bcsstk05
bcsstm05
west0156
can_161
dwt_162
lop163
YaleA_10NN
west0167
GD96_d
rajat14
mcca
fs_183_6
fs_183_4
fs_183_3
fs_183_1
gre_185
can_187
mycielskian8
dwt_193
dwt_198
jazz
Trefethen_200b
will199
rdb200l
Trefethen_200
bwm200
rdb200
tumorAntiAngiogenesis_1
impcol_a
dwt_209
Glass_10NN
gre_216a
ex1
gre_216b
dwt_221
grid1_dual
impcol_e
pde225
can_229
dwt_234
nos1
saylr1
steam1
dwt_245
grid1
can_256
sphere3
nnc261
Chebyshev1
lshp_265
can_268
bcspwr04
mesh3e1
mesh3em5
ash292
can_292
celegansneural
Trefethen_300
utm300
08blocks
rajat05
tumorAntiAngiogenesis_2
mesh2e1
mesh2em5
dwt_307
cz308
dwt_310
GD01_a
cavity01
cavity03
cavity04
cavity02
qc324
spaceStation_2
USAir97
Ecoli_10NN
tols340
cage7
gre_343
dwt_346
GD00_a
hangGlider_1
dwt_361
plat362
plskz362
str_600
str_400
str_200
str_0
CAG_mat364
cage
dermatology_5NN
poisson2D
west0381
mycielskian9
SmallW
bfwb398
bfwa398
Olivetti_norm_10NN
odepb400
ck400
odepa400
lshp_406
tumorAntiAngiogenesis_3
problem1
mhdb416
mhda416
dwt_419
bcsstk07
bcsstm07
bcsstm06
bcsstk06
impcol_d
oscil_dcop_41
oscil_dcop_01
oscil_dcop_02
oscil_dcop_03
oscil_dcop_04
oscil_dcop_05
oscil_dcop_06
oscil_dcop_07
oscil_dcop_08
oscil_dcop_09
oscil_dcop_10
oscil_dcop_11
oscil_dcop_12
oscil_dcop_13
oscil_dcop_14
oscil_dcop_15
oscil_dcop_16
oscil_dcop_17
oscil_dcop_18
oscil_dcop_19
oscil_dcop_20
oscil_dcop_21
oscil_dcop_22
oscil_dcop_23
oscil_dcop_24
oscil_dcop_25
oscil_dcop_26
oscil_dcop_27
oscil_dcop_28
oscil_dcop_29
oscil_dcop_30
oscil_dcop_31
oscil_dcop_32
oscil_dcop_33
oscil_dcop_34
oscil_dcop_35
oscil_dcop_36
oscil_dcop_37
oscil_dcop_38
oscil_dcop_39
oscil_dcop_40
oscil_dcop_42
oscil_dcop_43
oscil_dcop_44
oscil_dcop_45
oscil_dcop_46
oscil_dcop_47
oscil_dcop_48
oscil_dcop_49
oscil_dcop_50
oscil_dcop_51
oscil_dcop_52
oscil_dcop_53
oscil_dcop_54
oscil_dcop_55
oscil_dcop_56
oscil_dcop_57
oscil_trans_01
hor_131
ex2
orbitRaising_1
bcspwr05
can_445
rdb450
rdb450l
GD97_c
celegans_metabolic
tumorAntiAngiogenesis_4
tumorAntiAngiogenesis_5
tumorAntiAngiogenesis_6
spaceStation_3
nos5
Erdos971
tumorAntiAngiogenesis_7
west0479
rbsa480
rbsb480
bcsstm20
bcsstk20
Erdos981
tumorAntiAngiogenesis_8
dwt_492
Erdos991
494_bus
rw496
mbeaflw
mbeacxc
mbeause
west0497
olm500
Harvard500
Trefethen_500
tomography
dwt_503
lnsp_511
lns_511
dw256A
dwb512
dwt_512
gre_512
dw256B
dwa512
S10PI_n1
M10PI_n1
Spectro_10NN
pores_3
fs_541_1
fs_541_3
fs_541_2
fs_541_4
EX1
spaceShuttleEntry_1
EX2
micromass_10NN
umistfacesnorm_10NN
lshp_577
lowThrust_1
bcsstm34
bcsstk34
dwt_592
steam2
ch5-5-b3
dwt_607
netz4504_dual
cz628
can_634
GD00_c
dynamicSoaringProblem_1
west0655
ex21
ck656
662_bus
shl_400
shl_200
shl_0
nnc666
nos6
reorientation_1
fs_680_1
fs_680_2
fs_680_3
S10PI_n
M10PI_n
685_bus
Trefethen_700
lock_700
can_715
msc00726
nos7
dendrimer
orbitRaising_2
dwt_758
fs_760_1
fs_760_2
fs_760_3
orbitRaising_3
mcfe
mycielskian10
qh768
Si2
lshp_778
bfwb782
bfwa782
rotor2
freeFlyingRobot_1
G14
G12
G10
G1
G9
G8
G7
G6
G5
G4
G3
G21
rdb800l
G20
G2
G19
G18
G17
G16
G15
G13
G11
bcsstm19
bcsstk19
bp_1600
bp_800
bp_600
bp_400
bp_200
bp_1400
bp_1200
bp_1000
bp_0
goddardRocketProblem_1
can_838
ex22
young3c
young4c
young2c
young1c
Vehicle_10NN
ex25
goddardRocketProblem_2
dwt_869
dwt_878
qh882
orsirr_2
gr_30_30
pde900
DK01R
orbitRaising_4
dwt_918
jagmesh1
spaceStation_4
GD01_Acap
L
nos2
nos3
cdde4
cdde3
cdde2
dwg961b
dwg961a
cdde1
cdde6
cdde5
rdb968
ex27
west0989
jpwh_991
dwt_992
)

######### group name
group=(
HB
Hamrle
Pajek
Newman
Pajek
Pajek
vanHeukelum
Pajek
HB
DIMACS10
Mycielski
Pajek
HB
Pothen
HB
Pothen
Pothen
HB
Grund
HB
HB
HB
HB
HB
Pajek
Newman
HB
Bai
Bai
Pajek
Pajek
HB
Pothen
Rommes
HB
HB
HB
JGD_CAG
Pajek
HB
HB
Pajek
Newman
HB
Pajek
Pajek
HB
JGD_Margulies
Pajek
Grund
Grund
HB
Bai
vanHeukelum
Mycielski
HB
VDOL
HB
Bai
Morandini
Bai
Pajek
MathWorks
Bai
Pajek
JGD_Homology
Newman
ML_Graph
Pajek
Pajek
HB
Newman
HB
HB
HB
Newman
HB
Morandini
Pajek
Pajek
HB
HB
HB
HB
HB
HB
Rajat
Bai
HB
HB
HB
HB
HB
HB
CPM
JGD_Trefethen
ML_Graph
HB
HB
HB
HB
HB
Bai
ML_Graph
HB
Pajek
Rajat
HB
HB
HB
HB
HB
HB
HB
Mycielski
HB
HB
Arenas
JGD_Trefethen
HB
Bai
JGD_Trefethen
Bai
Bai
VDOL
HB
HB
ML_Graph
HB
FIDAP
HB
HB
AG-Monien
HB
Bai
HB
HB
HB
HB
HB
HB
AG-Monien
HB
Pothen
HB
Muite
HB
HB
HB
Pothen
Pothen
HB
HB
Newman
JGD_Trefethen
TOKAMAK
JGD_SPG
Rajat
VDOL
Pothen
Pothen
HB
CPM
HB
Pajek
DRIVCAV
DRIVCAV
DRIVCAV
DRIVCAV
Bai
VDOL
Pajek
ML_Graph
Bai
vanHeukelum
HB
HB
Pajek
VDOL
HB
HB
HB
HB
HB
HB
HB
JGD_CAG
AG-Monien
ML_Graph
FEMLAB
HB
Mycielski
Pajek
Bai
Bai
ML_Graph
Bai
Bai
Bai
HB
VDOL
FEMLAB
Bai
Bai
HB
HB
HB
HB
HB
HB
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
Sandia
HB
FIDAP
VDOL
HB
HB
Bai
Bai
Pajek
Arenas
VDOL
VDOL
VDOL
VDOL
HB
Pajek
VDOL
HB
Bai
Bai
HB
HB
Pajek
VDOL
HB
Pajek
HB
Bai
HB
HB
HB
HB
Bai
MathWorks
JGD_Trefethen
MathWorks
HB
HB
HB
Bai
Bai
HB
HB
Bai
Bai
Rommes
Rommes
ML_Graph
HB
HB
HB
HB
HB
JGD_SPG
VDOL
JGD_SPG
ML_Graph
ML_Graph
HB
VDOL
Boeing
Boeing
HB
HB
JGD_Homology
HB
AG-Monien
CPM
HB
Pajek
VDOL
HB
FIDAP
Bai
HB
HB
HB
HB
HB
HB
VDOL
HB
HB
HB
Rommes
Rommes
HB
JGD_Trefethen
HB
HB
Boeing
HB
Negre
VDOL
HB
HB
HB
HB
VDOL
HB
Mycielski
Bai
PARSEC
HB
Bai
Bai
Morandini
VDOL
Gset
Gset
Gset
Gset
Gset
Gset
Gset
Gset
Gset
Gset
Gset
Gset
Bai
Gset
Gset
Gset
Gset
Gset
Gset
Gset
Gset
Gset
HB
HB
HB
HB
HB
HB
HB
HB
HB
HB
HB
VDOL
HB
FIDAP
HB
HB
HB
HB
ML_Graph
FIDAP
VDOL
HB
HB
Bai
HB
HB
Bai
Fluorem
VDOL
HB
HB
VDOL
Pajek
AG-Monien
HB
HB
Bai
Bai
Bai
Bai
Bai
Bai
Bai
Bai
Bai
FIDAP
HB
HB
HB
)

# suc=(
# 65
# 164
# 177
# 336
# 429
# )

TARGET_DIR="./eval_data"

if [ -d "$TARGET_DIR" ]; then
   echo "'$TARGET_DIR' found and now copying files, please wait ..."
else
   echo "Warning: '$TARGET_DIR' NOT found. Create it"
   mkdir $TARGET_DIR
fi

OUTPUT=paperdata/small_V32N2M8.csv
rm -rf $OUTPUT
# rm -rf ${TARGET_DIR}/*

make clean && make spmm

for (( i=0; i<${#filename[@]}; i++ ));
# for i in "${suc[@]}"
do
echo "${group[$i]}/${filename[$i]}"
wget https://suitesparse-collection-website.herokuapp.com/MM/${group[$i]}/${filename[$i]}.tar.gz
tar zxvf ${filename[$i]}.tar.gz
mv ${filename[$i]}/${filename[$i]}.mtx ${TARGET_DIR}
rm -rf ${filename[$i]}.tar.gz
rm -rf ${filename[$i]}

echo "./spmm --mtxfile ${TARGET_DIR}/${filename[$i]}.mtx --outmtxfile outmtx/tmp.mtx --maxiter 10 --n 64 --sched 0 --v 32"
printf "${filename[$i]}, " >> ${OUTPUT}
./spmm --mtxfile ${TARGET_DIR}/${filename[$i]}.mtx --outmtxfile outmtx/tmp.mtx --maxiter 10 --n 64 --sched 0 --v 32 >> ${OUTPUT}

# echo >> $OUTPUT
rm -rf ${TARGET_DIR}/${filename[$i]}.mtx
done